{% extends "base.html" %}{% load i18n %}{% load pubs_extra_tags %}{% load thumbnail %}{% block title %}{% trans "Feature detail" %}{% endblock %}{% block head %}<link rel="stylesheet" type="text/css" media="all" href="{{STATIC_URL}}publications/css/detail.css" /><script src="http://code.jquery.com/jquery-1.8.3.js"></script><script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>{{ map.media }}<script>$(function() {    $('#images_thumbnails a').click(function(){      var newImageSrc = $(this).attr('href');      $('#images_full img').attr({'src': newImageSrc });      return false;    });    $(".toggle").click(function() {            var $toggled = $(this).attr('href');            $($toggled).siblings(':visible').hide();            $($toggled).toggle();            return false;    });});</script><style type="text/css">#info-box {    display: block;    max-width: 1000px;    background-color: #ffffff;  /* #fbfbfb; */    border: 1px solid #AAA;    border-bottom: 1px solid #888;    border-radius: 3px;    color: black;    -moz-box-shadow: 0px 1px 1px #AAA;    -webkit-box-shadow: 0px 1px 1px #AAA;    box-shadow: 0px 1px 1px #AAA;/*    box-shadow: 0px 1px 1px #AAA; */    margin: 10px 20px 20px;}#info-content {    display: block;    margin: 20px 20px 20px 25px;}#label-column {    white-space: nowrap;    /* font-weight: bold; */    vertical-align: top;}#wkt-collapsed {    display: inline;}#wkt-expanded {    display: none;}#map-viewport {    /* min-height: 200px;    min-width: 250px; */    border: 1px solid #AAA;    border-bottom: 1px solid #888;    -moz-box-shadow: 0px 1px 1px #AAA;    -webkit-box-shadow: 0px 1px 1px #AAA;    box-shadow: 0px 1px 1px #AAA;    /* overflow: hidden; */}#images_full img{    max-height: 400px;}#images_full img,#images_thumbnails img {    background-color: #cccccc;    padding:3px;    border:1px solid #555;    -moz-box-shadow: 0px 2px 2px #AAA;    -webkit-box-shadow: 0px 2px 2px #AAA;    box-shadow: 0px 2px 2px #AAA;}#images_thumbnails img {  margin:4px;  height: 75px;}</style>{% endblock %}{% block headline %}{% trans "Feature detail" %}{% endblock %}{% block body %}<div id="info-box">    <div id="info-content"><table  style='font-family: Verdana, Arial; font-size: 8pt; width:100%'><tr><td  style="vertical-align:top;"><table><tr><td id="label-column">Name</td><td class='report-title'>{{ feature.name }}</td></tr><tr><td id="label-column">Type</td><td>{{ feature.type }}</td></tr><tr><td id="label-column">Date</td><td>{{ feature.date|date:"Y-m-d"  }}</td></tr><tr><td id="label-column">Report:</td><td>{% for pub in feature.publications.all %}<a href="/pubs/detail/{{ pub.id }}/">{{ pub.number }}</a>{% if not forloop.last %}, {% endif %}{% endfor %}</td></tr><tr><td>&nbsp;</td><td></td></tr>{% if geometry %}<tr><td id="label-column">SRID:</td><td>{{ geometry.srid }}</td></tr><tr><td id="label-column">WKT:</td><td>    {% if geometry.wkt|length > 120 %}    {{ geometry.wkt|slice:":100" }}    <span id="wkt-collapsed">....  <a href="#wkt-expanded" class="toggle">[expand]</a></span><span id="wkt-expanded">{{ geometry.wkt|slice:"100:" }}  <a href="#wkt-collapsed" class="toggle">[collapse]</a></span>    {% else %}    {{ geometry.wkt }}    {% endif %}</td></tr><tr><td>&nbsp;</td><td></td></tr>{% endif %}<tr><td id="label-column">Description</td><td>{{ feature.description }}</td></tr><tr><td id="label-column">Comment</td><td>{{ feature.comment }}</td></tr><tr><td>&nbsp;</td><td></td></tr>{% if user.is_authenticated %}<tr><td id="label-column">Options:</td><td><a id='2' href="/pubs/edit/feature/{{ feature.id }}/" target="info"><img title="Edit..." src="{{STATIC_URL}}icons/Hamburg/16x16/edit.png" /></a>&nbsp;&nbsp;&nbsp;<a id='2' href="/pubs/feature/{{ feature.id }}/delete/" target="info"><img id="delete-me" title="Delete!" src="{{STATIC_URL}}icons/Hamburg/16x16/busy.png" /></a></td></tr>{% endif %}</table></td><td><div id="map-viewport">{{ map }}</div></td></tr></table><br/><br/>Registered Files:<br/>{% for fobj in feature.files.all %}<a href="{{ MEDIA_URL }}{{ fobj.file.name }}">{% if fobj.file.name %}{{ fobj.file.name|basename }}{% else %}{{ fobj.id }}{% endif %}</a><br/>{% empty %}No files registered<br/>{% endfor %}{% if user.is_authenticated %}<br/><a href="/pubs/feature/{{ feature.id }}/upload_files/">Upload files</a><br/>{% endif %}<br/><br/>Registered Images:<br/>{% with feature.images.all as images %}{% if images %}<center><div id="images_full">    {% if images.0.image.name %}    <img src="{{MEDIA_URL}}{{ images.0.image.name }}" alt="image not found"/>    {% endif %}</div>{% if images.count > 1 %}<div id="images_thumbnails">{% for iobj in images %}{% thumbnail iobj.image "x75" as thumb %}    <a href="{{MEDIA_URL}}{{ iobj.image.name }}"><img src="{{ thumb.url}}"></a>{% empty %}{% endthumbnail %}  <!-- <a href="{{MEDIA_URL}}{{ iobj.image.name }}"><img src="{{MEDIA_URL}}{{ iobj.image.name }}"></a> -->{% endfor %}</div>{% endif %}</center>{% endif %}{% for iobj in images %}<a href="{{MEDIA_URL}}{{ iobj.image.name }}">{% if iobj.image.name %}{{ iobj.image.name|basename }}{% else %}{{ iobj.id }}{% endif %}</a><br/>{% empty %}No files registered<br/>{% endfor %}{% if user.is_authenticated %}<br/><a href="/pubs/feature/{{ feature.id }}/upload_images/">Upload images</a><br/>{% endif %}{% endwith %}    </div>    <!-- end of info-content --></div>          <!-- end of info-box --><br/><br/>{% endblock %}