{% extends "base.html" %}{% load i18n %}{% block title %}{% trans "Publication detail" %}{% endblock %}{% block head %}<link rel="stylesheet" type="text/css" media="all" href="{{STATIC_URL}}publications/css/detail.css" /><script src="http://code.jquery.com/jquery-1.8.3.js"></script><script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>{% if pub.feature_set.all %}{{ map.media }}{% endif %}<script>    $(function() {        $(".toggle").click(function() {            var $toggled = $(this).attr('href');            /*            $($toggled).siblings(':visible').hide("slide", {direction: 'up'}, 0);            $($toggled).toggle("slide", {direction: 'up'}, 0); */            $($toggled).siblings(':visible').hide();            $($toggled).toggle();            return false;            });    });    $(window).load(function() {        // This code will execute after the map has loaded...    });</script><style type="text/css">#info-box, #map-box, #appendix-box {    display: block;    max-width: 1000px;    background-color: #ffffff;  /* #fbfbfb; */    border: 1px solid #AAA;    border-bottom: 1px solid #888;    border-radius: 3px;    color: black;    -moz-box-shadow: 0px 1px 1px #AAA;    -webkit-box-shadow: 0px 1px 1px #AAA;    box-shadow: 0px 1px 1px #AAA;/*    box-shadow: 0px 1px 1px #AAA; */    margin: 10px 20px 20px;}#info-content, #map-content, #appendix-content {    display: block;    margin: 20px 20px 20px 25px;}#label-column {    white-space: nowrap;    /* font-weight: bold; */    vertical-align: top;}#abstract-collapsed {    display: inline;}#abstract-expanded {    display: none;}#report-thumb {    border: 1px solid #AAA;    border-bottom: 1px solid #888;/*    -moz-box-shadow: 0px 1px 1px #AAA;    -webkit-box-shadow: 0px 1px 1px #AAA;    box-shadow: 0px 1px 1px #AAA;  */    vertical-align:top;}#map-viewport {    border: 1px solid #AAA;    border-bottom: 1px solid #888;    -moz-box-shadow: 0px 1px 1px #AAA;    -webkit-box-shadow: 0px 1px 1px #AAA;    box-shadow: 0px 1px 1px #AAA;}</style>{% endblock %}{% block headline %}{% trans "Publication detail" %}{% endblock %}{% block body %}{% load thumbnail %}{% load pubs_extra_tags %}<div id="info-box">    <div id="info-content"><table  style='font-family: Verdana, Arial; font-size: 8pt; width:100%'><tr><td  style="vertical-align:top;"><table><tr><td><tr><td id="label-column">{% trans "Title" %}</td><td class='report-title'>{{ pub.title }}</td></tr><tr><td id="label-column">{% trans "Authors" %}</td><td>{% include "publications/snippets/authorlist_short.html" %}</td></tr><tr><td><br></td><td></td></tr><tr><td id="label-column">{% trans "Year" %}</td><td>{{ pub.year }}</td></tr><tr><td id="label-column">{% trans "Report no." %}</td><td>{{ pub.number }}</td></tr><tr><td id="label-column">{% trans "Topics" %}</td><td>{% for k in pub.topics.all %}{{ k }}{% if not forloop.last %}, {% endif %}{% empty %}{% trans "No topics registered" %}{% endfor %}</td></tr><tr><td id="label-column">{% trans "Keywords" %}</td><td>{% for k in pub.keywords.all %}{{ k }}{% if not forloop.last %}, {% endif %}{% empty %}{% trans "No keywords registered" %}{% endfor %}</td></tr>{% if pub.file %}<tr><td id="label-column">{% trans "pdf-file" %}</td><td><a href='{{MEDIA_URL}}{{ pub.file.file.name }}'>{% trans "download report as pdf" %} ({{ pub.file.filesize }})</a>{% if user.is_authenticated %}<a style='color:#c80000;font-weight:bold;text-decoration: None;' href='/pubs/report/{{ pub.id }}/delete_reportfile/' title='Delete'>X</a>{% endif %}</td></tr>{% endif %}{% if pub.sorted_supervisorships %}<tr><td id="label-column">{% trans "Supervisors" %}</td><td>{% include "publications/snippets/supervisorlist_short.html" %}</td></tr>{% endif %}<tr><td><br></td><td></td></tr><tr><td id="label-column">{% trans "Abstract" %}</td><td>{% comment %}Look into this template tag for truncating words with character limit: https://djangosnippets.org/snippets/1516/{% endcomment %}{% if pub.abstract %}{% if pub.abstract|length > 300 %}{{ pub.abstract|slice:":280" }}<span id="abstract-collapsed">....  <a href="#abstract-expanded" class="toggle">[expand]</a></span><span id="abstract-expanded">{{ pub.abstract|slice:"280:" }}  <a href="#abstract-collapsed" class="toggle">[collapse]</a></span>{% else %}{{ pub.abstract }}{% endif %}{% else %}{% trans "No abstract registered" %}{% endif %}</td></tr><tr><td><br></td><td></td></tr>{% if pub.comment %}<tr><td>{% trans "Comment" %}</td><td>{{ pub.comment }}</td></tr>{% endif %}<tr><td><br></td><td></td></tr>{% if user.is_authenticated %}<tr><td>{% trans "Options" %}:</td><td><a id='2' href="/pubs/edit/report/{{ pub.id }}/" target="info"><img title="Edit..." src="{{STATIC_URL}}icons/Hamburg/16x16/edit.png" /></a>&nbsp;<a id='2' href="/pubs/report/{{ pub.id }}/add/feature/"><img title="Add geographic feature..." src="{{STATIC_URL}}icons/Hamburg/16x16/world.png" /></a>&nbsp;&nbsp;&nbsp;<a id='2' href="/pubs/report/{{ pub.id }}/delete/"><img id="delete-me" title="Delete entire publication!" src="{{STATIC_URL}}icons/Hamburg/16x16/busy.png" /></a>{% if not pub.verified %}&nbsp;&nbsp;&nbsp;<a id='2' href="/pubs/verify/report/{{ pub.id }}/"><img title="By clicking, you verify that this report is correctly registered..." src="{{STATIC_URL}}icons/Hamburg/16x16/check.png" /></a>{% endif %}</td></tr>{% endif %}<tr><td colspan="2">{% if user.is_authenticated %}{% if not pub.verified %}<img src="{{STATIC_URL}}icons/Hamburg/16x16/lightbulb.png" title="Entry needs verification!"/> {% trans "THIS REPORT ENTRY NEEDS VERIFICATION!" %} <img src="{{STATIC_URL}}icons/Hamburg/16x16/lightbulb.png" title="Entry needs verification!"/>{% endif %}{% endif %}</td></tr>{% if user.is_authenticated and user.is_superuser %}{% if not pub.verified %}<tr><td id="label-column">{% trans "ARTEKFTP file-location" %}:</td><td>{% if pub.file.original_URL %}<a id='2' href="{{ pub.file.original_URL }}" target="_blank">{{ pub.file.original_URL }}</a>{% else %}<a id='2' href="ftp://artekftp.byg.dtu.dk/rapporter/{{ pub.year }}/" target="_blank">ftp://artekftp.byg.dtu.dk/rapporter/{{ pub.year }}/</a> &nbsp;&nbsp;(report not found){% endif %}</td></tr>{% endif %}{% endif %}</table></td><td style="vertical-align:top;">    {% thumb_file pub.file.file.name as tf %}    <a href='{{MEDIA_URL}}{{ pub.file.file.name }}'>    <img src="{{ tf }}" height="300" id="report-thumb">    </a></td></table>    </div>    <!-- end of info-content --></div>          <!-- end of info-box --><div id="appendix-box">    <div id="appendix-content">{% if pub.appendices.all %}<h3>{% trans "Appendices" %}:</h3><table>{% for ap in pub.appendices.all %}<tr><td>    <a href="{{ ap.file.url }}">{{ ap.filename }}</a>    {% if user.is_authenticated %}    <a style='color:#c80000;font-weight:bold;text-decoration: None;' href='/pubs/report/{{ pub.id }}/delete_appendixfile/{{ ap.id }}' title='Delete'>X</a>    {% endif %}</td></td>{% endfor %}</table>{% if user.is_authenticated %}<br/><a href="/pubs/report/{{ pub.id }}/upload/">{% trans "Upload appendices" %}</a><br/>{% endif %}{% else %}<h3>{% trans "Appendices" %}:</h3>{% trans "No appendices registered" %}.{% if user.is_authenticated %}<a href="/pubs/report/{{ pub.id }}/upload/">{% trans "Upload appendices" %}</a><br/>{% endif %}{% endif %}    </div>    <!-- end of appendix-content --></div>          <!-- end of appendix-box --><div id="map-box">    <div id="map-content"><h3>{% trans "Registered features" %}:</h3>{% if pub.feature_set.all %}<table><tr><td><div id="map-viewport">{{ map }}</div></td><td>    {% include "publications/snippets/feature_type_legend.html" %}</td></tr></table><br><br>{% include "publications/snippets/feature_list.html" with feat_list=pub.feature_set.all%}{% if user.is_authenticated %}<a id='2' href="/pubs/report/{{ pub.id }}/delete_all_features/">{% trans "delete all" %}</a><a id='2'href="/pubs/report/{{ pub.id }}/add/feature/">{% trans "add feature" %}</a>{% endif %}{% else %}{% trans "No features registered" %}.{% if user.is_authenticated %}<a id='2'href="/pubs/report/{{ pub.id }}/add/feature/">{% trans "add feature" %}</a>{% endif %}{% endif %}    </div></div><br/><br/>{% endblock %}